# 2. 相关背景

## 2.1 技术背景

### 2.1.1 服务（Service）与计算（Compute）
#### 2.1.1.1 服务Service
  在面向服务架构(SOA, Service-Oriented Architecture)中，"Service"（服务）是一个独立的功能单元，通过标准化的接口向其他服务和应用程序提供特定的业务功能或技术功能。SOA旨在通过将业务逻辑分解为独立的、可复用的服务，来提高系统的灵活性和可维护性。包括业务服务、基础设施服务等。
##### 服务分类
  1. 业务服务：提供具体的业务功能，如订单处理、客户管理、库存管理等。这些服务直接反映业务流程和逻辑。
  2. 基础设施服务：提供底层的技术功能，如身份验证、日志记录、事务管理等。这些服务支持业务服务的运行。
  3. 复合服务：由多个基础服务组合而成，提供更复杂的功能。这种服务通常实现特定的业务流程。

##### 服务的实现技术
- Web 服务：使用SOAP(Simple Object Access Protocol)和WSDL(Web Services Description Language)来定义和调用服务。
- RESTful服务：使用HTTP协议和REST(Representational State Transfer)架构风格，通过标准的HTTP方法(GET、POST、PUT、DELETE)来操作资源。
- 微服务：一种更细粒度的SOA实现，每个微服务是一个独立的部署单元，通常使用容器化技术(Docker)和轻量级通信协议(HTTP/HTTPS、gRPC)。

### 2.1.1.2 计算Compute（含数据处理）
  - 计算是指使用数学运算和算法来处理数据，以得到特定的结果，以解决科学、工程的问题。
  - 数据处理是指对数据进行收集、整理、分析、存储、转换和展示等一系列操作，以提取有用的信息和知识。通常涉及大量的数据。


## 2.2 应用背景

## 2.3 应用的主要特点

### 数据规模大
- 原始数据量大，SKA每年数据量达到数百PB。
- 数据处理I/O强度大。单轮数据处理的I/O规模比原始数据高出3个数量级以上。

### 数据处理流程复杂

- 复杂数据处理流水线

### 软件研发
- 基于大量开源组件
- 多种程序语言：Python、C/C++等

## 2.3 面临的主要挑战

### 数据处理效率低
- 以现有软硬件技术，处理天文数据效率低下。导致数据成本居高不下，进而难以完成数据处理。
- 软件研发过程复杂：

## 2.4 Scalebox与已有相关技术对比

### 2.4.1 Scalebox vs. MPI

MPI (Message Passing Interface) 是一种用于并行计算的标准通信协议及编程模型，广泛应用于高性能计算 (HPC) 领域。MPI提供了一套丰富的函数库，允许不同计算进程在分布式系统中进行通信和协作，通常用于大规模并行计算任务。

#### 共同点

- 大规模计算/数据处理的编程模型，支持通用并行计算

#### 不同点

- 应用场景
  - MPI适用于科学仿真和建模等，包括流体动力学、天气预报、气候建模、分子动力学模拟等，计算过程中涉及到高频度通信。
  - Scalebox侧重于超大规模数据读写的高通量计算
- 进程通信机制
  - MPI支持点对点通信、集合通信和一对多、多对多通信等，优化通信性能，减少通信开销
  - Scalebox基于Server端完成计算模块间通信，提供了更有效的通信管理特性，对于通信密集型应用效率较低；
- 计算存储支持
  - MPI基于共享的高性能并行存储（Lustre、GPFS等）
  - Scalebox提供灵活的本地存储支持，提高I/O效率
- 并行程序结构
  - MPI是传统单层结构的并行计算程序
  - Scalebox程序包括两层结构，底层是容器封装后的算法模块，上层是以消息驱动式触发底层算法模块的并行程序；
  - 并行程序难度

### 2.4.2 Scalebox vs. Hadoop/Spark

Hadoop和Spark是两种流行的大数据框架，用于处理和分析大规模数据集。

Hadoop的核心组件包括Hadoop分布式文件系统(HDFS)和MapReduce编程模型。HDFS提供高容错性和高吞吐量的数据存储，而 MapReduce支持并行处理大数据任务。

Spark是一个基于内存计算的大数据处理引擎，支持批处理、实时处理和流处理。相比于传统的Hadoop MapReduce，Spark具有更快的数据加载速度，具有更丰富的API，支持多种编程语言如Java、Scala、Python 和 R。

#### 共同点

- 大数据处理

#### 不同点

- 应用场景
  - 大数据框架：传统互联网应用
  - Scalebox：持续迭代的复杂算法、算法间需流水线串接、I/O需求超出集群的能力
- 计算存储支持
  - 大数据框架：基于共享的集群存储（GFS、HDFS等）
  - Scalebox：提供灵活的本地存储支持，提升I/O效率

### 2.4.3 Scalebox vs. Kubenetes(k8s)

Kubernetes是典型容器化云服务平台，其具备资源利用率高、弹性扩展、跨平台、自动化运维、DevOps支持等优点。

#### 共同点
- 容器编排及负载调度：在云原生架构下，基于容器引擎，实现算法容器的编排、调度、自动化。

#### 不同点
- 负载类型
  - k8s：主要为服务类负载，计算类负载则封装为服务形式（XaaS）
  - Scalebox：主要针对计算类负载，并对计算过程做两级封装（容器层、集成层）
- 调用方式
  - k8s：以服务封装计算，服务之间相互级联调用，完成完整计算过程；被动的（阻塞/非阻塞）同步调用；微服务层级的程序级接口；
  - Scalebox：采用消息/事件驱动，原生的异步调用形式，更高计算效率；容器层级的标准接口，更为通用。
- 负载优化的目标
  - k8s：更可靠服务
  - Scalebox：更高的计算效率
    - I/O横向扩展
    - 超高I/O的本地分层加载（本地内存/本地SSD磁盘/网络存储/...）
- 跨算力中心支持
  - k8s：通过federation实现
  - Scalebox：原生支持
- 无状态特性
  - k8s：微服务无状态，以支持横向扩展；在应用层面上保持状态。
  - Scalebox：消息驱动，消息中存放状态，比如待处理的节点。


- TCP/IP网络的设计哲学
  - 分层次的网络结构
    - 每一层实现一种相对独立的功能，相邻两层通过服务访问点SAP交互信息，对等层实体通信通过网络协议来实现
  - 沙漏状的TCP/IP协议族
    - 应用层设计很复杂，可以提供多种应用服务
    - 网络接口层设计很复杂，支持多种网络互连
    - 上下两层大而复杂，中间小而精简
    - 中间的IP层设计的精简，这样不同网络的通信就可以很简单的交互信息